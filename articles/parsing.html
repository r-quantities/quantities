<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Parsing Quantities • quantities</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parsing Quantities">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">quantities</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">A Guide to Working with Quantities</a></li>
    <li><a class="dropdown-item" href="../articles/parsing.html">Parsing Quantities</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-quantities/quantities/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Parsing Quantities</h1>
                        <h4 data-toc-skip class="author">Iñaki Ucar</h4>
            
            <h4 data-toc-skip class="date">2025-01-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-quantities/quantities/blob/v0.2.3/vignettes/parsing.Rmd" class="external-link"><code>vignettes/parsing.Rmd</code></a></small>
      <div class="d-none name"><code>parsing.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <a href="https://www.bipm.org/" class="external-link">BIPM</a> (<em>Bureau
International des Poids et Mesures</em>) is the international
<em>authority</em> on measurement units and uncertainty. The Joint
Committee for Guides in Metrology (JCGM), dependent on the BIPM together
with other international standardisation bodies, maintains two
fundamental guides in metrology: the <a href="https://www.bipm.org/en/committees/jc/jcgm/publications" class="external-link">VIM</a>
(“The International Vocabulary of Metrology – Basic and General Concepts
and Associated Terms”) and the <a href="https://www.bipm.org/en/committees/jc/jcgm/publications" class="external-link">GUM</a>
(“Evaluation of Measurement Data – Guide to the Expression of
Uncertainty in Measurement”). The latter defines four ways of reporting
standard uncertainty. For example, if we are reporting a nominal mass
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mi>S</mi></msub><annotation encoding="application/x-tex">m_S</annotation></semantics></math>
of 100 g with some uncertainty
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>c</mi></msub><annotation encoding="application/x-tex">u_c</annotation></semantics></math>:</p>
<ol style="list-style-type: decimal">
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mi>S</mi></msub><annotation encoding="application/x-tex">m_S</annotation></semantics></math>
= 100.02147 g,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>c</mi></msub><annotation encoding="application/x-tex">u_c</annotation></semantics></math>
= 0.35 mg; that is, quantity an uncertainty are reported separatedly,
and thus they may be expressed in different units.</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mi>S</mi></msub><annotation encoding="application/x-tex">m_S</annotation></semantics></math>
= 100.02147(35) g, where the number in parentheses is the value of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>c</mi></msub><annotation encoding="application/x-tex">u_c</annotation></semantics></math>
referred to the corresponding last digits of the reported quantity.</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mi>S</mi></msub><annotation encoding="application/x-tex">m_S</annotation></semantics></math>
= 100.02147(0.00035) g, where the number in parentheses is the value of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>c</mi></msub><annotation encoding="application/x-tex">u_c</annotation></semantics></math>
expressed in the unit of the reported quantity.</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>m</mi><mi>S</mi></msub><annotation encoding="application/x-tex">m_S</annotation></semantics></math>
= (100.02147
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>±</mo><annotation encoding="application/x-tex">\pm</annotation></semantics></math>
0.00035), where the number following the symbol
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>±</mo><annotation encoding="application/x-tex">\pm</annotation></semantics></math>
is the value of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>c</mi></msub><annotation encoding="application/x-tex">u_c</annotation></semantics></math>
in the unit of the reported quantity.</li>
</ol>
<p>The second scheme is the most compact one, and it is the default
reporting mode in the <code>errors</code> package. The fourth scheme is
also supported given that it is a very extended notation, but the GUM
discourages its use to prevent confusion with confidence intervals.</p>
<p>In the same lines, the BIMP also publishes the <a href="https://www.bipm.org/en/measurement-units/" class="external-link">International System
of Units</a> (SI), which consist of seven base units and derived units,
many of them with special names and symbols. Units are reported after
the corresponding quantity using products of powers of symbols (e.g., 1
N = 1 m kg s-2).</p>
</div>
<div class="section level2">
<h2 id="available-parsers">Available parsers<a class="anchor" aria-label="anchor" href="#available-parsers"></a>
</h2>
<p>The <code>quantities</code> package provides three methods that parse
units and uncertainty following the GUM’s recommendations:</p>
<ul>
<li>
<code><a href="../reference/parse_quantities.html">parse_quantities()</a></code>: The returned value is always a
<code>quantities</code> object.
<ul>
<li>If no uncertainty was found, a zero error is assumed for all
values.</li>
<li>If no units were found, all values are supposed to be unitless.</li>
</ul>
</li>
<li>
<code><a href="../reference/parse_quantities.html">parse_errors()</a></code>: The returned value is always an
<code>errors</code> object.
<ul>
<li>If no uncertainty was found, a zero error is assumed for all
values.</li>
<li>If units were found, a warning is emitted.</li>
</ul>
</li>
<li>
<code><a href="../reference/parse_quantities.html">parse_units()</a></code>: The returned value is always a
<code>units</code> object.
<ul>
<li>If uncertaint was found, a warning is emitted.</li>
<li>If no units were found, all values are supposed to be unitless.</li>
</ul>
</li>
</ul>
<p>Given a rectangular data file, such as a CSV file, it can be read
with any CSV reader (e.g., base <code>read.csv</code>,
<code>readr</code>’s <code>read_csv</code> or <code>data.table</code>’s
<code>fread</code>). Then, a proper parser can be used to convert
columns as required.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">d.quantities</span> <span class="op">&lt;-</span> <span class="va">d.units</span> <span class="op">&lt;-</span> <span class="va">d.errors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/textconnections.html" class="external-link">textConnection</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">quantities,        units,  errors</span></span>
<span><span class="st">1.02(5) g,         1.02 g, 1.02(5)</span></span>
<span><span class="st">2.51(0.01) V,      2.51 V, 2.51(0.01)</span></span>
<span><span class="st">(3.23 +/- 0.12) m, 3.23 m, 3.23 +/- 0.12"</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;          quantities           units         errors</span></span>
<span><span class="co">#&gt; 1         1.02(5) g          1.02 g        1.02(5)</span></span>
<span><span class="co">#&gt; 2      2.51(0.01) V          2.51 V     2.51(0.01)</span></span>
<span><span class="co">#&gt; 3 (3.23 +/- 0.12) m          3.23 m  3.23 +/- 0.12</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-quantities.github.io/quantities/" class="external-link">quantities</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: units</span></span>
<span><span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span></span>
<span><span class="co">#&gt; Loading required package: errors</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">d.quantities</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span>
<span>  <span class="va">d.quantities</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_quantities</a></span><span class="op">(</span><span class="va">d.quantities</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">d.units</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_units</a></span><span class="op">(</span><span class="va">d.units</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">d.errors</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_errors</a></span><span class="op">(</span><span class="va">d.errors</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; quantities</span></span>
<span><span class="co">#&gt; Warning in parse_units(d.units[[name]]): errors present but ignored</span></span>
<span><span class="co">#&gt; Warning in parse_errors(d.errors[[name]]): units present but ignored</span></span>
<span><span class="co">#&gt; units</span></span>
<span><span class="co">#&gt; Warning in parse_errors(d.errors[[name]]): units present but ignored</span></span>
<span><span class="co">#&gt; errors</span></span>
<span><span class="co">#&gt; Warning in parse_units(d.units[[name]]): errors present but ignored</span></span>
<span></span>
<span><span class="va">d.quantities</span></span>
<span><span class="co">#&gt;    quantities       units      errors</span></span>
<span><span class="co">#&gt; 1 1.02(5) [g] 1.02(0) [g] 1.02(5) [1]</span></span>
<span><span class="co">#&gt; 2 2.51(1) [V] 2.51(0) [V] 2.51(1) [1]</span></span>
<span><span class="co">#&gt; 3  3.2(1) [m] 3.23(0) [m]  3.2(1) [1]</span></span>
<span><span class="va">d.units</span></span>
<span><span class="co">#&gt;   quantities    units   errors</span></span>
<span><span class="co">#&gt; 1   1.02 [g] 1.02 [g] 1.02 [1]</span></span>
<span><span class="co">#&gt; 2   2.51 [V] 2.51 [V] 2.51 [1]</span></span>
<span><span class="co">#&gt; 3   3.23 [m] 3.23 [m] 3.23 [1]</span></span>
<span><span class="va">d.errors</span></span>
<span><span class="co">#&gt;   quantities   units  errors</span></span>
<span><span class="co">#&gt; 1    1.02(5) 1.02(0) 1.02(5)</span></span>
<span><span class="co">#&gt; 2    2.51(1) 2.51(0) 2.51(1)</span></span>
<span><span class="co">#&gt; 3     3.2(1) 3.23(0)  3.2(1)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Iñaki Ucar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
