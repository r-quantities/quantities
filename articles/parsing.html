<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parsing Quantities • quantities</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Parsing Quantities">
<meta property="og:description" content="quantities">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quantities</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">A Guide to Working with Quantities</a>
    </li>
    <li>
      <a href="../articles/parsing.html">Parsing Quantities</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-quantities/quantities/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Parsing Quantities</h1>
                        <h4 class="author">Iñaki Ucar</h4>
            
            <h4 class="date">2020-06-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-quantities/quantities/blob/master/vignettes/parsing.Rmd"><code>vignettes/parsing.Rmd</code></a></small>
      <div class="hidden name"><code>parsing.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <a href="http://www.bipm.org/">BIPM</a> (<em>Bureau International des Poids et Mesures</em>) is the international <em>authority</em> on measurement units and uncertainty. The Joint Committee for Guides in Metrology (JCGM), dependent on the BIPM together with other international standardisation bodies, maintains two fundamental guides in metrology: the <a href="http://www.bipm.org/vim">VIM</a> (“The International Vocabulary of Metrology – Basic and General Concepts and Associated Terms”) and the <a href="https://www.bipm.org/en/publications/guides/gum.html">GUM</a> (“Evaluation of Measurement Data – Guide to the Expression of Uncertainty in Measurement”). The latter defines four ways of reporting standard uncertainty. For example, if we are reporting a nominal mass <span class="math inline">\(m_S\)</span> of 100 g with some uncertainty <span class="math inline">\(u_c\)</span>:</p>
<ol style="list-style-type: decimal">
<li>
<span class="math inline">\(m_S\)</span> = 100.02147 g, <span class="math inline">\(u_c\)</span> = 0.35 mg; that is, quantity an uncertainty are reported separatedly, and thus they may be expressed in different units.</li>
<li>
<span class="math inline">\(m_S\)</span> = 100.02147(35) g, where the number in parentheses is the value of <span class="math inline">\(u_c\)</span> referred to the corresponding last digits of the reported quantity.</li>
<li>
<span class="math inline">\(m_S\)</span> = 100.02147(0.00035) g, where the number in parentheses is the value of <span class="math inline">\(u_c\)</span> expressed in the unit of the reported quantity.</li>
<li>
<span class="math inline">\(m_S\)</span> = (100.02147 <span class="math inline">\(\pm\)</span> 0.00035), where the number following the symbol <span class="math inline">\(\pm\)</span> is the value of <span class="math inline">\(u_c\)</span> in the unit of the reported quantity.</li>
</ol>
<p>The second scheme is the most compact one, and it is the default reporting mode in the <code>errors</code> package. The fourth scheme is also supported given that it is a very extended notation, but the GUM discourages its use to prevent confusion with confidence intervals.</p>
<p>In the same lines, the BIMP also publishes the <a href="https://www.bipm.org/en/measurement-units/">International System of Units</a> (SI), which consist of seven base units and derived units, many of them with special names and symbols. Units are reported after the corresponding quantity using products of powers of symbols (e.g., 1 N = 1 m kg s-2).</p>
</div>
<div id="available-parsers" class="section level2">
<h2 class="hasAnchor">
<a href="#available-parsers" class="anchor"></a>Available parsers</h2>
<p>The <code>quantities</code> package provides three methods that parse units and uncertainty following the GUM’s recommendations:</p>
<ul>
<li>
<code><a href="../reference/parse_quantities.html">parse_quantities()</a></code>: The returned value is always a <code>quantities</code> object.
<ul>
<li>If no uncertainty was found, a zero error is assumed for all values.</li>
<li>If no units were found, all values are supposed to be unitless.</li>
</ul>
</li>
<li>
<code><a href="../reference/parse_quantities.html">parse_errors()</a></code>: The returned value is always an <code>errors</code> object.
<ul>
<li>If no uncertainty was found, a zero error is assumed for all values.</li>
<li>If units were found, a warning is emitted.</li>
</ul>
</li>
<li>
<code><a href="../reference/parse_quantities.html">parse_units()</a></code>: The returned value is always a <code>units</code> object.
<ul>
<li>If uncertaint was found, a warning is emitted.</li>
<li>If no units were found, all values are supposed to be unitless.</li>
</ul>
</li>
</ul>
<p>Given a rectangular data file, such as a CSV file, it can be read with any CSV reader (e.g., base <code>read.csv</code>, <code>readr</code>’s <code>read_csv</code> or <code>data.table</code>’s <code>fread</code>). Then, a proper parser can be used to convert columns as required.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r">(<span class="no">d.quantities</span> <span class="kw">&lt;-</span> <span class="no">d.units</span> <span class="kw">&lt;-</span> <span class="no">d.errors</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/textconnections.html">textConnection</a></span>(<span class="st">"
quantities,        units,  errors
1.02(5) g,         1.02 g, 1.02(5)
2.51(0.01) V,      2.51 V, 2.51(0.01)
(3.23 +/- 0.12) m, 3.23 m, 3.23 +/- 0.12"</span>), <span class="kw">stringsAsFactors</span><span class="kw">=</span><span class="fl">FALSE</span>))
<span class="co">#&gt;          quantities           units         errors</span>
<span class="co">#&gt; 1         1.02(5) g          1.02 g        1.02(5)</span>
<span class="co">#&gt; 2      2.51(0.01) V          2.51 V     2.51(0.01)</span>
<span class="co">#&gt; 3 (3.23 +/- 0.12) m          3.23 m  3.23 +/- 0.12</span></pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">quantities</span>)
<span class="co">#&gt; Loading required package: units</span>
<span class="co">#&gt; udunits system database from /usr/local/share/udunits</span>
<span class="co">#&gt; Loading required package: errors</span>

<span class="kw">for</span> (<span class="no">name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">d.quantities</span>)) {
  <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span>(<span class="no">name</span>)
  <span class="no">d.quantities</span><span class="kw">[[</span><span class="no">name</span>]] <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_quantities</a></span>(<span class="no">d.quantities</span><span class="kw">[[</span><span class="no">name</span>]])
  <span class="no">d.units</span><span class="kw">[[</span><span class="no">name</span>]] <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_units</a></span>(<span class="no">d.units</span><span class="kw">[[</span><span class="no">name</span>]])
  <span class="no">d.errors</span><span class="kw">[[</span><span class="no">name</span>]] <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_errors</a></span>(<span class="no">d.errors</span><span class="kw">[[</span><span class="no">name</span>]])
}
<span class="co">#&gt; quantities</span>
<span class="co">#&gt; Warning in parse_units(d.units[[name]]): errors present but ignored</span>
<span class="co">#&gt; Warning in parse_errors(d.errors[[name]]): units present but ignored</span>
<span class="co">#&gt; units</span>
<span class="co">#&gt; Warning in parse_errors(d.errors[[name]]): units present but ignored</span>
<span class="co">#&gt; errors</span>
<span class="co">#&gt; Warning in parse_units(d.units[[name]]): errors present but ignored</span>

<span class="no">d.quantities</span>
<span class="co">#&gt;    quantities       units      errors</span>
<span class="co">#&gt; 1 1.02(5) [g] 1.02(0) [g] 1.02(5) [1]</span>
<span class="co">#&gt; 2 2.51(1) [V] 2.51(0) [V] 2.51(1) [1]</span>
<span class="co">#&gt; 3  3.2(1) [m] 3.23(0) [m]  3.2(1) [1]</span>
<span class="no">d.units</span>
<span class="co">#&gt;   quantities    units   errors</span>
<span class="co">#&gt; 1   1.02 [g] 1.02 [g] 1.02 [1]</span>
<span class="co">#&gt; 2   2.51 [V] 2.51 [V] 2.51 [1]</span>
<span class="co">#&gt; 3   3.23 [m] 3.23 [m] 3.23 [1]</span>
<span class="no">d.errors</span>
<span class="co">#&gt;   quantities   units  errors</span>
<span class="co">#&gt; 1    1.02(5) 1.02(0) 1.02(5)</span>
<span class="co">#&gt; 2    2.51(1) 2.51(0) 2.51(1)</span>
<span class="co">#&gt; 3     3.2(1) 3.23(0)  3.2(1)</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Iñaki Ucar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
