<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="quantities">
<title>Parsing Quantities • quantities</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parsing Quantities">
<meta property="og:description" content="quantities">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">quantities</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">A Guide to Working with Quantities</a>
    <a class="dropdown-item" href="../articles/parsing.html">Parsing Quantities</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-quantities/quantities/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Parsing Quantities</h1>
                        <h4 data-toc-skip class="author">Iñaki Ucar</h4>
            
            <h4 data-toc-skip class="date">2022-12-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-quantities/quantities/blob/HEAD/vignettes/parsing.Rmd" class="external-link"><code>vignettes/parsing.Rmd</code></a></small>
      <div class="d-none name"><code>parsing.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <a href="https://www.bipm.org/" class="external-link">BIPM</a> (<em>Bureau
International des Poids et Mesures</em>) is the international
<em>authority</em> on measurement units and uncertainty. The Joint
Committee for Guides in Metrology (JCGM), dependent on the BIPM together
with other international standardisation bodies, maintains two
fundamental guides in metrology: the <a href="https://www.bipm.org/en/committees/jc/jcgm/publications" class="external-link">VIM</a>
(“The International Vocabulary of Metrology – Basic and General Concepts
and Associated Terms”) and the <a href="https://www.bipm.org/en/committees/jc/jcgm/publications" class="external-link">GUM</a>
(“Evaluation of Measurement Data – Guide to the Expression of
Uncertainty in Measurement”). The latter defines four ways of reporting
standard uncertainty. For example, if we are reporting a nominal mass
<span class="math inline">\(m_S\)</span> of 100 g with some uncertainty
<span class="math inline">\(u_c\)</span>:</p>
<ol style="list-style-type: decimal">
<li>
<span class="math inline">\(m_S\)</span> = 100.02147 g, <span class="math inline">\(u_c\)</span> = 0.35 mg; that is, quantity an
uncertainty are reported separatedly, and thus they may be expressed in
different units.</li>
<li>
<span class="math inline">\(m_S\)</span> = 100.02147(35) g, where
the number in parentheses is the value of <span class="math inline">\(u_c\)</span> referred to the corresponding last
digits of the reported quantity.</li>
<li>
<span class="math inline">\(m_S\)</span> = 100.02147(0.00035) g,
where the number in parentheses is the value of <span class="math inline">\(u_c\)</span> expressed in the unit of the reported
quantity.</li>
<li>
<span class="math inline">\(m_S\)</span> = (100.02147 <span class="math inline">\(\pm\)</span> 0.00035), where the number following
the symbol <span class="math inline">\(\pm\)</span> is the value of
<span class="math inline">\(u_c\)</span> in the unit of the reported
quantity.</li>
</ol>
<p>The second scheme is the most compact one, and it is the default
reporting mode in the <code>errors</code> package. The fourth scheme is
also supported given that it is a very extended notation, but the GUM
discourages its use to prevent confusion with confidence intervals.</p>
<p>In the same lines, the BIMP also publishes the <a href="https://www.bipm.org/en/measurement-units/" class="external-link">International System
of Units</a> (SI), which consist of seven base units and derived units,
many of them with special names and symbols. Units are reported after
the corresponding quantity using products of powers of symbols (e.g., 1
N = 1 m kg s-2).</p>
</div>
<div class="section level2">
<h2 id="available-parsers">Available parsers<a class="anchor" aria-label="anchor" href="#available-parsers"></a>
</h2>
<p>The <code>quantities</code> package provides three methods that parse
units and uncertainty following the GUM’s recommendations:</p>
<ul>
<li>
<code><a href="../reference/parse_quantities.html">parse_quantities()</a></code>: The returned value is always a
<code>quantities</code> object.
<ul>
<li>If no uncertainty was found, a zero error is assumed for all
values.</li>
<li>If no units were found, all values are supposed to be unitless.</li>
</ul>
</li>
<li>
<code><a href="../reference/parse_quantities.html">parse_errors()</a></code>: The returned value is always an
<code>errors</code> object.
<ul>
<li>If no uncertainty was found, a zero error is assumed for all
values.</li>
<li>If units were found, a warning is emitted.</li>
</ul>
</li>
<li>
<code><a href="../reference/parse_quantities.html">parse_units()</a></code>: The returned value is always a
<code>units</code> object.
<ul>
<li>If uncertaint was found, a warning is emitted.</li>
<li>If no units were found, all values are supposed to be unitless.</li>
</ul>
</li>
</ul>
<p>Given a rectangular data file, such as a CSV file, it can be read
with any CSV reader (e.g., base <code>read.csv</code>,
<code>readr</code>’s <code>read_csv</code> or <code>data.table</code>’s
<code>fread</code>). Then, a proper parser can be used to convert
columns as required.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">d.quantities</span> <span class="op">&lt;-</span> <span class="va">d.units</span> <span class="op">&lt;-</span> <span class="va">d.errors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/textconnections.html" class="external-link">textConnection</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">quantities,        units,  errors</span></span>
<span><span class="st">1.02(5) g,         1.02 g, 1.02(5)</span></span>
<span><span class="st">2.51(0.01) V,      2.51 V, 2.51(0.01)</span></span>
<span><span class="st">(3.23 +/- 0.12) m, 3.23 m, 3.23 +/- 0.12"</span><span class="op">)</span>, stringsAsFactors<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;          quantities           units         errors</span></span>
<span><span class="co">#&gt; 1         1.02(5) g          1.02 g        1.02(5)</span></span>
<span><span class="co">#&gt; 2      2.51(0.01) V          2.51 V     2.51(0.01)</span></span>
<span><span class="co">#&gt; 3 (3.23 +/- 0.12) m          3.23 m  3.23 +/- 0.12</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-quantities.github.io/quantities/" class="external-link">quantities</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: units</span></span>
<span><span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span></span>
<span><span class="co">#&gt; Loading required package: errors</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">d.quantities</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span>
<span>  <span class="va">d.quantities</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_quantities</a></span><span class="op">(</span><span class="va">d.quantities</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">d.units</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_units</a></span><span class="op">(</span><span class="va">d.units</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">d.errors</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_quantities.html">parse_errors</a></span><span class="op">(</span><span class="va">d.errors</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; quantities</span></span>
<span><span class="co">#&gt; Warning in parse_units(d.units[[name]]): errors present but ignored</span></span>
<span><span class="co">#&gt; Warning in parse_errors(d.errors[[name]]): units present but ignored</span></span>
<span><span class="co">#&gt; units</span></span>
<span><span class="co">#&gt; Warning in parse_errors(d.errors[[name]]): units present but ignored</span></span>
<span><span class="co">#&gt; errors</span></span>
<span><span class="co">#&gt; Warning in parse_units(d.units[[name]]): errors present but ignored</span></span>
<span></span>
<span><span class="va">d.quantities</span></span>
<span><span class="co">#&gt;    quantities       units      errors</span></span>
<span><span class="co">#&gt; 1 1.02(5) [g] 1.02(0) [g] 1.02(5) [1]</span></span>
<span><span class="co">#&gt; 2 2.51(1) [V] 2.51(0) [V] 2.51(1) [1]</span></span>
<span><span class="co">#&gt; 3  3.2(1) [m] 3.23(0) [m]  3.2(1) [1]</span></span>
<span><span class="va">d.units</span></span>
<span><span class="co">#&gt;   quantities    units   errors</span></span>
<span><span class="co">#&gt; 1   1.02 [g] 1.02 [g] 1.02 [1]</span></span>
<span><span class="co">#&gt; 2   2.51 [V] 2.51 [V] 2.51 [1]</span></span>
<span><span class="co">#&gt; 3   3.23 [m] 3.23 [m] 3.23 [1]</span></span>
<span><span class="va">d.errors</span></span>
<span><span class="co">#&gt;   quantities   units  errors</span></span>
<span><span class="co">#&gt; 1    1.02(5) 1.02(0) 1.02(5)</span></span>
<span><span class="co">#&gt; 2    2.51(1) 2.51(0) 2.51(1)</span></span>
<span><span class="co">#&gt; 3     3.2(1) 3.23(0)  3.2(1)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Iñaki Ucar.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
